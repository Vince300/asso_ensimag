# = require jquery
# = require jquery_ujs
# = require turbolinks
# = require bootstrap
# = require moment
# = require moment/fr
# = require bootstrap-datetimepicker
# = require bootstrap-colorpicker
# = require ckeditor/init

$ ->
  init_editors = ->
    $('.form-datetime').each ->
      $this = $(this)
      v = moment($this.find('input').val())
      $this.datetimepicker
        locale: 'fr'
        sideBySide: true
        showTodayButton: true
        allowInputToggle: true
        showClear: true
      $this.data("DateTimePicker").date(v)
    $('.colorpicker-editor').each ->
      $(this).colorpicker
        align: 'left'
        format: 'hex'
    $('.btn-file :file').on 'change', (event) ->
      input = $(this)
      txtInput = input.parents('.input-group').find(':text')
      txtInput.val input.val()
    $('.btn-clear').click (event) ->
      btn = $(this)
      prnt = btn.parents('.input-group')
      input = prnt.find('.btn-file :file')
      txtInput = prnt.find(':text')
      input.val null
      txtInput.val null

  $(document).ready(init_editors)
  $(document).on('page:load', init_editors)
